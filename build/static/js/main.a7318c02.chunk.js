(this.webpackJsonptool=this.webpackJsonptool||[]).push([[0],{566:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),o=n.n(c),i=n(58),r=n.n(i),s=(n(370),n(582)),l=n(122),u=n(32),p=n(192),j=n.n(p),b=(n(379),n(602)),d=n(604),O=n(580),h=n(14),f=n(8),x=n(29),m=n.n(x),v=n(324),g=n(325),y="SET_SOCKETIO_ID",S="INVALIDATE_SOCKETIO_ID",C="SET_LOGIN_TOKEN",T="UNSET_LOGIN_TOKEN",P="UPDATE_IS_SUBMITTED",k="FETCH_PAPERS",D="CHANGE_CURRENT_PAPER_DETAILS",_="CHANGE_PAPER_ID",I="CREATE_PAPER",F="IS_REFRESHING",E="CHANGE_ROOT_PAPER_ID",w="CHANGE_SPECIAL_PAPER_ID",A="IS_SPECIAL_PAPER_MODAL_OPEN",N=n(107),Q=function(e,t){switch(t.type){case y:return Object(N.a)(e,(function(e){e.socket_io_id=t.payload}));case S:return Object(N.a)(e,(function(e){e.socket_io_id=null}));case C:return Object(N.a)(e,(function(e){e.authToken=t.payload.token,e.roles=t.payload.roles}));case T:return Object(N.a)(e,(function(e){e.authToken=null,e.roles=null,e.isSubmitted=!1,e.isSpecialPaper=!1,e.isSpecialPaperModalOpen=!1,e.rootPaperID="",e.rootPaperName="",e.paperID="",e.paperName="",e.paperGrade="",e.paperSubject="",e.paperType="",e.papers={},e.spapers={},e.isRefreshing=!1}));case P:return Object(N.a)(e,(function(e){e.isSubmitted=t.payload}));case F:return Object(N.a)(e,(function(e){e.isRefreshing=t.payload}));case k:return Object(N.a)(e,(function(e){e.papers=[],t.payload.npapers.forEach((function(t){e.papers[t.paperType]||(e.papers[t.paperType]={papers:[]}),e.papers[t.paperType].papers.push({name:t.paperName,id:t._id})})),t.payload.spapers.forEach((function(t){e.spapers[t.name]||(e.spapers[t.name]={name:t.name,_id:t._id})}))}));case A:var n=Object(h.a)({},e);return n.isSpecialPaperModalOpen=t.payload,n;case D:return Object(h.a)(Object(h.a)({},e),{},{paperGrade:t.payload.grade,paperSubject:t.payload.subject,paperName:t.payload.paperName,paperType:t.payload.paperType});case E:var a=Object(h.a)({},e);return a.rootPaperID=t.payload.rootPaperID,a.rootPaperName=t.payload.rootPaperName,a;case w:var c=Object(h.a)({},e);return c.paperID=t.payload.paperID,c.isSpecialPaper=!0,c;case _:var o=Object(h.a)({},e);return o.paperID=t.payload.paperID,o.isSpecialPaper=!1,o;case I:var i=Object(h.a)(Object(h.a)({},e),{},{papers:Object(h.a)({},e.papers)});return i.paperID=t.payload._id,i.paperName=t.payload.paperName,i.paperGrade=t.payload.grade,i.paperSubject=t.payload.subject,i.papers[t.payload.paperType]||(i.papers[t.payload.paperType]={papers:[]}),i.papers[t.payload.paperType].papers.push({name:t.payload.paperName,id:t.payload._id}),i;default:return e}};m.a.defaults.baseURL="http://localhost:3500/";var q=Object(g.io)("https://admintool-rabbitmq-consumer.herokuapp.com/"),R={authToken:function(){try{var e=localStorage.getItem("authToken"),t=Object(v.a)(e).exp;return Date.now()>=1e3*t?null:e}catch(n){return null}}(),roles:localStorage.getItem("roles")?localStorage.getItem("roles").split(","):[],isSubmitted:!1,isSpecialPaper:!1,isSpecialPaperModalOpen:!1,rootPaperID:"",rootPaperName:"",paperID:"",paperName:"",paperGrade:"",paperSubject:"",paperType:"",currentQuestions:[],papers:{},spapers:{},socket_io_id:null,isRefreshing:!1},G=Object(c.createContext)(R),L=function(e){var t=e.children,n=Object(c.useReducer)(Q,R),o=Object(f.a)(n,2),i=o[0],r=o[1];q.on("connect",(function(){r({type:y,payload:q.id})})),q.on("disconnect",(function(){r({type:S})}));var s=function(e,t,n){p.store.addNotification({title:e,message:n,type:t,insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:2e3,onScreen:!0}})};return Object(a.jsxs)(G.Provider,{value:Object(h.a)(Object(h.a)({},i),{},{changeSpecialPaperModalVisibility:function(e){r({type:A,payload:e})},changeRootPaperID:function(e,t){r({type:E,payload:{rootPaperID:e,rootPaperName:t}})},updatePaperDetails:function(e){r({type:D,payload:{grade:e.grade,subject:e.subject,paperName:e.paperName,paperType:e.paperType}})},changeSpecialPaperID:function(e){r({type:w,payload:{paperID:e}})},changePaperID:function(e){r({type:_,payload:{paperID:e}})},createPaperDispatch:function(e,t){m.a.post("create-paper",e,{headers:{AuthToken:t}}).then((function(e){var t=e.data;t.success?(r({type:I,payload:t.paper}),s("Success!","success","Paper created successfully")):t.errors.forEach((function(e){s("Error!","danger",e)}))})).catch((function(e){s("Error!","danger",e.message)}))},fetchPapers:function(e){m.a.get("papers",{headers:{AuthToken:e}}).then((function(e){var t=e.data;if(!t)throw new Error("Failed to fetch papers");r({type:k,payload:t})})).catch((function(e){s("Error!","danger",e.message)}))},fetchQuestions:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return m.a.get("/paper-questions/".concat(e,"/").concat(n,"/").concat(a),{headers:{AuthToken:t}})},setIsSample:function(e,t,n){return m.a.post("/set-sample/".concat(t),{isSample:n},{headers:{AuthToken:e}}).then((function(e){var t=e.data;if(t.success)return s("Success!","success","Question set/removed as sample"),t.success;throw new Error("Failed to set question as sample")})).catch((function(e){return s("Error!","danger",e.message),!1}))},isSubmittedDispatch:function(e){r({type:P,payload:e})},addQuestion:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return m.a.post("/create-question/".concat(n),e,{headers:{AuthToken:t}})},searchForQuestions:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return m.a.get("/search/".concat(t,"/").concat(a,"?").concat(n),{headers:{AuthToken:e}})},removeQuestionDispatch:function(e,t){return m.a.delete("/remove-question/".concat(e),{headers:{AuthToken:t}})},loginDispatch:function(e){console.log("http://localhost:3500/"),m.a.post("/user/login",e).then((function(e){var t=e.data;if(!t.success)throw new Error("There was an error");localStorage.setItem("authToken",t.token),localStorage.setItem("roles",t.roles),r({type:C,payload:{token:t.token,roles:t.roles}}),s("Success!","success","Welcome")})).catch((function(e){s("Error!","danger",e.message)}))},approveQuestionDispatch:function(e,t,n){return m.a.get("approve-question/".concat(e),{headers:{AuthToken:n}})},submitPaperDispatch:function(e,t,n){return m.a.post("/submit-paper",{paperID:t,clientID:e},{headers:{AuthToken:n}})},createNotification:s,logoutDispatcher:function(){r({type:T})},removePaper:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return m.a.delete("/remove-paper/".concat(e,"/").concat(n),{headers:{AuthToken:t}})},setIsRefreshingDispatch:function(e){r({type:F,payload:e})},fetchAdminGrades:function(e){return m.a.get("admin/grades",{headers:{AuthToken:e}})},socketIO:q}),children:[" ",t," "]})},B=n(594),z=n(598),M=n(589),H=n(588),U=function(e){var t=e.createPaper,n=Object(c.useContext)(G),o=n.authToken,i=n.createNotification,r=Object(c.useState)(!1),s=Object(f.a)(r,2),l=s[0],u=s[1],p=Object(c.useState)([]),j=Object(f.a)(p,2),b=j[0],d=j[1],O=Object(c.useState)({}),x=Object(f.a)(O,2),v=x[0],g=x[1],y=Object(c.useState)([]),S=Object(f.a)(y,2),C=S[0],T=S[1],P=Object(c.useState)([]),k=Object(f.a)(P,2),D=k[0],_=k[1],I=Object(c.useState)({grade:"",subject:"",paperType:""}),F=Object(f.a)(I,2),E=F[0],w=F[1];Object(c.useEffect)((function(){m.a.get("/user/metadata",{headers:{AuthToken:o}}).then((function(e){var t=e.data,n=t.paperTypeCanDo.map((function(e,t){return{key:"".concat(e.replaceAll(" ",""),"_").concat(t),text:e,value:e}}));T(n);var a=t.contentCanDo.map((function(e,t){return{key:"".concat(e.grade,"_").concat(t),text:e.grade,value:e.grade}}));d(a);var c=t.contentCanDo.reduce((function(e,t){return e[t.grade]=t.subjects.map((function(e,t){return{key:"".concat(e.replaceAll(" ",""),"_").concat(t),text:e,value:e}})),e}),{});g(c)})).catch((function(e){u(!1),i("Error!","danger",e.message)}))}),[]);return Object(a.jsxs)(B.a,{onClose:function(){return u(!1)},onOpen:function(){return u(!0)},size:"tiny",open:l,trigger:Object(a.jsx)(z.a,{basic:!0,compact:!0,fluid:!0,primary:!0,content:"create paper",icon:"pencil alternate",labelPosition:"right"}),children:[Object(a.jsx)(B.a.Header,{children:"New Paper"}),Object(a.jsx)(B.a.Content,{children:Object(a.jsxs)(M.a,{children:[Object(a.jsxs)(M.a.Field,{children:[Object(a.jsx)("label",{children:"Grade"}),Object(a.jsx)(H.a,{onChange:function(e,t){var n=t.value;w(Object(h.a)(Object(h.a)({},E),{},{grade:n})),_(v[n])},selection:!0,fluid:!0,options:b,placeholder:"Select Grade"})]}),Object(a.jsxs)(M.a.Field,{children:[Object(a.jsx)("label",{children:"Subject"}),Object(a.jsx)(H.a,{onChange:function(e,t){var n=t.value;w(Object(h.a)(Object(h.a)({},E),{},{subject:n}))},selection:!0,fluid:!0,options:D,placeholder:"Select Subject"})]}),Object(a.jsxs)(M.a.Field,{children:[Object(a.jsx)("label",{children:"Paper Type"}),Object(a.jsx)(H.a,{onChange:function(e,t){var n=t.value;w(Object(h.a)(Object(h.a)({},E),{},{paperType:n}))},selection:!0,fluid:!0,options:C,placeholder:"Select Paper Type"})]})]})}),Object(a.jsx)(B.a.Actions,{children:Object(a.jsxs)(z.a.Group,{children:[Object(a.jsx)(z.a,{color:"black",onClick:function(e){e.preventDefault(),u(!1)},children:"Cancel"}),Object(a.jsx)(z.a.Or,{}),Object(a.jsx)(z.a,{onClick:function(e){e.preventDefault(),t(E),u(!1)},positive:!0,children:"Create Paper"})]})})]})},K=n(601),V=n(103),Y=n(595),J=function(e){var t=e.paperType,n=e.papers,o=e.handlePaperSelect,i=Object(c.useState)(!1),r=Object(f.a)(i,2),s=r[0],l=r[1],u=Object(c.useContext)(G).paperID;return Object(a.jsxs)("div",{style:{marginBottom:"6px"},children:[Object(a.jsxs)(K.a,{as:"h5",onClick:function(){return l(!s)},style:{cursor:"pointer"},children:[Object(a.jsx)(V.a,{color:"yellow",name:s?"folder open":"folder"}),t]}),Object(a.jsx)("div",{style:{marginLeft:"10px",marginBottom:"10px"},hidden:!s,children:Object(a.jsx)(Y.a,{divided:!0,verticalAlign:"middle",children:n.map((function(e,t){var n=u===e.id;return Object(a.jsxs)(Y.a.Item,{onContextMenu:function(t){return function(e,t){e.preventDefault()}(t,"".concat(e.id))},onClick:function(){return o("".concat(e.id))},children:[Object(a.jsx)(Y.a.Icon,{name:n?"file alternate":"file alternate outline"}),Object(a.jsx)(Y.a.Content,{children:Object(a.jsx)(Y.a.Header,{as:"a",children:Object(a.jsx)("div",{style:{textDecoration:n?"underline":"inherit"},children:e.name.charAt(0).toUpperCase()+e.name.slice(1)})})})]},"pp_".concat(t))}))})})]})},W=n(216),Z=function(){var e=Object(c.useContext)(G),t=e.authToken,n=e.createNotification,o=e.fetchPapers,i=Object(c.useState)(!1),r=Object(f.a)(i,2),s=r[0],l=r[1],u=Object(c.useState)(!1),p=Object(f.a)(u,2),j=p[0],d=p[1],O=Object(c.useState)([]),x=Object(f.a)(O,2),v=x[0],g=x[1],y=Object(c.useState)(null),S=Object(f.a)(y,2),C=S[0],T=S[1],P=Object(c.useState)(!1),k=Object(f.a)(P,2),D=k[0],_=k[1],I=Object(c.useState)({grade:"",paperType:"",excelFile:null}),F=Object(f.a)(I,2),E=F[0],w=F[1],A=function(e){l(e),e||(_(!1),T(null))};Object(c.useEffect)((function(){m.a.get("/user/metadata",{headers:{AuthToken:t}}).then((function(e){var t=e.data;g(t.contentCanDo.map((function(e,t){return{key:"".concat(e.grade,"_").concat(t),text:e.grade,value:e.grade}})))})).catch((function(e){T(e.message),_(!0)}))}),[t]);return Object(a.jsxs)(B.a,{onClose:function(){return A(!1)},onOpen:function(){return A(!0)},size:"tiny",open:s,trigger:Object(a.jsx)(z.a,{content:"import excel",style:{marginTop:"5px"},icon:"upload",fluid:!0,labelPosition:"right",compact:!0,primary:!0,basic:!0}),children:[Object(a.jsx)(B.a.Header,{children:"Import Excel File"}),Object(a.jsxs)(B.a.Content,{children:[D&&C?Object(a.jsxs)(b.a,{style:{color:"red"},children:[Object(a.jsx)(W.a,{icon:"times",corner:"right",onClick:function(e){return _(!1)},color:"red"}),C]}):null,Object(a.jsxs)(M.a,{onSubmit:function(e){return e.preventDefault()},children:[Object(a.jsxs)(M.a.Field,{children:[Object(a.jsx)("label",{children:"Grade"}),Object(a.jsx)(H.a,{onChange:function(e,t){var n=t.value;w(Object(h.a)(Object(h.a)({},E),{},{grade:n}))},selection:!0,fluid:!0,options:v,placeholder:"Select Grade"})]}),Object(a.jsxs)(M.a.Field,{children:[Object(a.jsx)("label",{children:"Excel file"}),Object(a.jsx)("input",{type:"file",onChange:function(e){w(Object(h.a)(Object(h.a)({},E),{},{excelFile:e.target.files[0]}))}})]}),Object(a.jsx)(z.a,{type:"button",loading:j,primary:!0,content:"Upload file",fluid:!0,onClick:function(){_(!1),T(null),d(!0);var e=new FormData;Object.entries(E).filter((function(e){var t=Object(f.a)(e,2),n=t[0];t[1];return"excelFile"!==n})).forEach((function(t){var n=Object(f.a)(t,2),a=n[0],c=n[1];e.append(a,c)})),e.append("excelFile",E.excelFile,E.excelFile.name),m.a.post("/import-excel-paper",e,{headers:{AuthToken:t}}).then((function(e){var a=e.data;if(a){if(a.success)return A(!1),n("Success!","success","Imported data successfully"),void o(t);throw new Error(a.error)}})).catch((function(e){T(e.message),_(!0)})).finally((function(){d(!1)}))}})]})]})]})},X=n(597),$=n(606),ee=n(328),te=n.n(ee),ne=function(){var e=Object(c.useContext)(G),t=e.authToken,n=e.rootPaperID,o=e.createNotification,i=e.isSpecialPaperModalOpen,r=e.changeSpecialPaperModalVisibility,s=Object(c.useState)(!1),l=Object(f.a)(s,2),u=l[0],p=l[1],j=Object(c.useState)(!1),d=Object(f.a)(j,2),O=d[0],x=d[1],v=Object(c.useState)(""),g=Object(f.a)(v,2),y=g[0],S=g[1],C=Object(c.useState)(!1),T=Object(f.a)(C,2),P=T[0],k=T[1],D=Object(c.useState)([{key:"index_0",text:"Model Paper",value:"Model Paper"},{key:"index_1",text:"Past Paper",value:"Past Paper"}]),_=Object(f.a)(D,2),I=_[0],F=(_[1],["Kiswahili","English","Mathematics","Science","SST&CRE"]),E=Object(c.useState)([]),w=Object(f.a)(E,2),A=w[0],N=w[1],Q=Object(c.useState)(null),q=Object(f.a)(Q,2),R=q[0],L=q[1],U=Object(c.useState)(!1),K=Object(f.a)(U,2),V=K[0],Y=K[1],J=Object(c.useState)({paperType:"",name_or_year:"",subject:""}),Z=Object(f.a)(J,2),ee=Z[0],ne=Z[1];Object(c.useEffect)((function(){N(F.map((function(e,t){return{key:"available_subject_".concat(t),text:e,value:e}})))}),[]);var ae=function(e){ne((function(t){return Object(h.a)(Object(h.a)({},t),{},{name_or_year:e.target.value})}))};return Object(a.jsxs)(B.a,{onClose:function(){return r(e=!1),void(e||(Y(!1),L(null)));var e},size:"tiny",open:i,children:[Object(a.jsx)(B.a.Header,{children:"KCPE model/past paper"}),Object(a.jsxs)(B.a.Content,{children:[V&&R?Object(a.jsxs)(b.a,{style:{color:"red"},children:[Object(a.jsx)(W.a,{icon:"times",corner:"right",onClick:function(e){return Y(!1)},color:"red"}),R]}):null,Object(a.jsxs)(M.a,{onSubmit:function(e){return e.preventDefault()},children:[Object(a.jsxs)(M.a.Field,{children:[Object(a.jsx)("label",{children:"Paper Type"}),Object(a.jsx)(H.a,{onChange:function(e,t){var n=t.value;ne((function(e){return Object(h.a)(Object(h.a)({},e),{},{paperType:n})})),p(!("model paper"===n.toLowerCase()))},selection:!0,fluid:!0,options:I,placeholder:"Select Paper Type"})]}),Object(a.jsxs)(M.a.Field,{children:[Object(a.jsx)("label",{children:u?"Year":"Paper Name"}),u?Object(a.jsx)("input",{type:"number",onChange:ae,min:"1986",max:(new Date).getFullYear()-1}):Object(a.jsx)("input",{type:"text",onChange:ae})]}),Object(a.jsxs)(M.a.Field,{children:[Object(a.jsx)("label",{children:"Subject"}),Object(a.jsx)(H.a,{onChange:function(e,t){var n=t.value;ne((function(e){return Object(h.a)(Object(h.a)({},e),{},{subject:n})}))},selection:!0,fluid:!0,options:A,placeholder:"Select Subject"})]}),Object(a.jsxs)(X.a,{children:[Object(a.jsx)(M.a.Field,{children:Object(a.jsx)($.a,{value:P,onChange:function(){return k((function(e){return!e}))},label:"Is Timed"})}),P?Object(a.jsx)(M.a.Field,{children:Object(a.jsx)(te.a,{onChange:S,defaultTime:"00:00",inputVisible:!0,value:y,isOpen:!1})}):null]}),Object(a.jsx)(z.a,{type:"button",loading:O,primary:!0,content:"Create Paper",fluid:!0,onClick:function(){x(!0);var e=y.split(":"),a=6e4*(60*+e[0]+ +e[1]),c=Object(h.a)(Object(h.a)({},ee),{},{isTimed:P,duration:a,rootID:n});m.a.post("/special-paper",c,{headers:{AuthToken:t}}).then((function(e){if(!e.data.status)throw new Error("Failed to create paper");o("Success!","success","Paper created successfully")})).catch((function(e){o("Error!","danger","Failed to create paper")})).finally((function(){x(!1),r(!1)}))}})]})]})]})},ae=function e(t){var n=t.parentName,o=t.spaper,i=t.rootPath,r=t.isRootFolder,s=void 0!==r&&r,l=Object(c.useContext)(G),u=l.changeRootPaperID,p=l.authToken,j=l.paperID,b=l.changeSpecialPaperID,d=l.changeSpecialPaperModalVisibility,O=Object(c.useState)(!1),h=Object(f.a)(O,2),x=h[0],v=h[1],g=Object(c.useState)(!1),y=Object(f.a)(g,2),S=y[0],C=y[1],T=Object(c.useState)([]),P=Object(f.a)(T,2),k=P[0],D=P[1];Object(c.useEffect)((function(){x&&m.a.get("/special-paper/".concat(i),{headers:{AuthToken:p}}).then((function(e){var t=e.data;if(!t.status)throw new Error(t.error||"Unable to fetch folders");C(t.files.areFiles),D(t.files.folders),console.log(t.files.folders)})).catch((function(e){console.log(e)}))}),[x]);return Object(a.jsxs)("div",{style:{marginLeft:s?"inherit":"18px",marginBottom:"6px"},children:[Object(a.jsxs)(K.a,{as:"h5",onClick:function(){v((function(e){return!e})),s&&u(o._id,o.name)},onContextMenu:function(e){return s?function(e,t){e.preventDefault(),u(o._id,o.name),d(!0)}(e):null},style:{cursor:"pointer"},children:[Object(a.jsx)(V.a,{color:"yellow",name:x?"folder open":"folder"}),n]}),x?S?Object(a.jsx)("div",{style:{marginLeft:"18px",marginBottom:"10px"},hidden:!x,children:Object(a.jsx)(Y.a,{divided:!0,verticalAlign:"middle",children:k.map((function(e,t){var n=e.subject,c=e._id,o=j===c;return Object(a.jsxs)(Y.a.Item,{onClick:function(){return b("".concat(c))},children:[Object(a.jsx)(Y.a.Icon,{name:o?"file alternate":"file alternate outline"}),Object(a.jsx)(Y.a.Content,{children:Object(a.jsx)(Y.a.Header,{as:"a",children:Object(a.jsx)("div",{style:{textDecoration:o?"underline":"inherit"},children:n.charAt(0).toUpperCase()+n.slice(1)})})})]},"pp_".concat(t))}))})}):Object(a.jsx)(a.Fragment,{children:k.map((function(t){var n=t.name,c=t._id;return Object(a.jsx)(e,{parentName:n,spaper:{},rootPath:"".concat(i,"/").concat(c)})}))}):null]})},ce=function(){var e=Object(c.useContext)(G).spapers;return Object(a.jsxs)("div",{children:[Object.keys(e).length?Object(a.jsx)(O.a,{horizontal:!0,children:"special papers"}):null,Object.entries(e).map((function(e){var t=Object(f.a)(e,2),n=t[0],c=t[1];return Object(a.jsx)(ae,{parentName:n,spaper:c,rootPath:c._id,isRootFolder:!0})}))]})},oe=function(){var e=Object(c.useContext)(G),t=e.changePaperID,n=e.createPaperDispatch,o=e.papers,i=e.authToken,r=e.fetchPapers;Object(c.useEffect)((function(){r(i)}),[]);var s=function(e){t(e)};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{style:{padding:"5px",borderRadius:"5px",border:"1px solid grey"},children:[Object(a.jsx)(U,{createPaper:function(e){n(e,i)}}),Object(a.jsx)(ne,{}),Object(a.jsx)(Z,{})]}),Object(a.jsxs)("div",{style:{height:"85vh",overflowY:"scroll",marginTop:"10px",padding:"10px"},children:[Object(a.jsx)(O.a,{horizontal:!0,children:"my papers"}),Object.keys(o).map((function(e,t){return Object(a.jsx)(J,{handlePaperSelect:s,paperType:e,papers:o[e].papers},"pt_".concat(t))})),Object(a.jsx)(ce,{})]})]})},ie=n(581),re=n(52),se=n(24),le=n(590),ue=n(607),pe=n(351),je=(n(422),n(143)),be=n(596),de=function(e){var t=e.children,n=Object(je.a)(e,["children"]);return Object(a.jsx)(be.a,Object(h.a)(Object(h.a)({fluid:!0},n),{},{children:Object(a.jsx)(be.a.Content,{children:t})}))},Oe=n(75),he=n.n(Oe),fe=function(e){var t=e.handleTopicAndSubject,n=e.topic,c=void 0===n?" ":n,o=e.subtopic,i=void 0===o?" ":o;return Object(a.jsxs)(M.a.Group,{inline:!0,children:[Object(a.jsxs)(M.a.Field,{children:[Object(a.jsx)("label",{children:"Topic"}),Object(a.jsx)("input",{name:"topic",value:c,onChange:t,placeholder:"Topic"})]}),Object(a.jsxs)(M.a.Field,{children:[Object(a.jsx)("label",{children:"Sub Topic"}),Object(a.jsx)("input",{name:"subTopic",value:i,onChange:t,placeholder:"Sub Topic"})]})]})},xe=[["undo","redo","font","fontSize","formatBlock"],["bold","underline","italic","strike","subscript","superscript","removeFormat"],["fontColor","hiliteColor","outdent","indent","align","horizontalRule","list","table"],["image","fullScreen","showBlocks","preview"]],me=function(e){var t=e.saveQuestionToDatabase,n=e.retrievedQuestion,o=void 0===n?{}:n,i=e.index,r=e.isSubmitted,s=void 0!==r&&r,l=Object(c.useContext)(G).roles,u=Object(c.useCallback)((function(e){return l.includes(e)}),[l])("can:review"),p=Object(c.useState)(""),j=Object(f.a)(p,2),b=j[0],d=j[1],O=Object(c.useState)({topic:" ",subTopic:" "}),x=Object(f.a)(O,2),m=x[0],v=x[1],g=Object(c.useState)([]),y=Object(f.a)(g,2),S=y[0],C=y[1],T=Object(c.useState)(""),P=Object(f.a)(T,2),k=P[0],D=P[1];Object(c.useEffect)((function(){var e=o&&o.question?o.question:"",t=o&&o.options_next?o.options_next.map((function(e){return{option:e.option,isCorrect:e.isCorrect}})):[],n=o&&o.additionalInfo?o.additionalInfo:"",a=o&&o.topic?{topic:o.topic,subTopic:o.subTopic}:{topic:" ",subTopic:" "};v(a),d(e),C(t),D(n)}),[]);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(M.a,{onSubmit:function(e){e.preventDefault();var n={questionType:"normal",question_id:o?o._id:null,question:b,options_next:S,topic:m.topic,subTopic:m.subTopic,additionalInfo:k||""};t(n,i)},children:[Object(a.jsx)(fe,{handleTopicAndSubject:function(e){v(Object(h.a)(Object(h.a)({},m),{},Object(re.a)({},e.target.name,e.target.value)))},topic:m.topic,subtopic:m.subTopic}),Object(a.jsx)(M.a.Field,{children:Object(a.jsx)(he.a,{autoFocus:!0,setOptions:{buttonList:xe},onChange:function(e){return d(e)},setContents:b,showToolbar:!0,enableToolbar:!0})}),Object(a.jsx)(M.a.Field,{children:Object(a.jsx)(z.a,{type:"button",compact:!0,primary:!0,disabled:s&&!u,onClick:function(e){e.preventDefault(),C([].concat(Object(se.a)(S),[{option:"",isCorrect:!1}]))},icon:"add",content:"Option",labelPosition:"right"})}),S.map((function(e,t){return Object(a.jsx)(M.a.Field,{children:Object(a.jsxs)(M.a.Group,{widths:"1",inline:!0,children:[Object(a.jsx)(M.a.Field,{children:Object(a.jsx)($.a,{disabled:s&&!u,defaultChecked:!(!o||!e.isCorrect),onClick:function(e){return function(e){var t=Object(se.a)(S);t[e].isCorrect=!t[e].isCorrect,C(t)}(t)}})}),Object(a.jsx)(M.a.Field,{children:Object(a.jsx)("input",{value:o?e.option:null,onChange:function(e){return function(e,t){var n=Object(se.a)(S);n[t].option=e.target.value,C(n)}(e,t)},type:"text"})}),Object(a.jsx)(z.a,{type:"button",circular:!0,icon:"superscript",disabled:s&&!u,compact:!0,basic:!0,color:"teal"}),Object(a.jsx)(z.a,{type:"button",circular:!0,compact:!0,basic:!0,color:"red",disabled:s&&!u,icon:!0,onClick:function(e){return function(e,t){e.preventDefault();var n=Object(se.a)(S);n.splice(t,1),C(n)}(e,t)},children:Object(a.jsx)(V.a,{name:"trash alternate outline"})})]})},"option_".concat(t))})),Object(a.jsx)(M.a.Field,{children:Object(a.jsx)(z.a,{type:"button",compact:!0,primary:!0,disabled:!!k||s,onClick:function(e){e.preventDefault(),D(" ")},content:"Additional Information",icon:"add",labelPosition:"right"})}),Object(a.jsx)(M.a.Field,{children:k?Object(a.jsx)(he.a,{autoFocus:!0,setOptions:{buttonList:xe},onChange:function(e){D(e)},setContents:k,showToolbar:!0,enableToolbar:!0}):null}),Object(a.jsx)(z.a,{basic:!0,color:"green",content:"Save Question",disabled:s&&!u,icon:"save",labelPosition:"right"})]})})},ve=[["undo","redo","font","fontSize","formatBlock"],["bold","underline","italic","strike","subscript","superscript","removeFormat"],["fontColor","hiliteColor","outdent","indent","align","horizontalRule","list","table"],["image","fullScreen","showBlocks","preview"]],ge=function(e){var t=e.saveQuestionToDatabase,n=e.retrievedQuestion,o=e.index,i=e.isSubmitted,r=void 0!==i&&i,s=Object(c.useContext)(G).roles,l=Object(c.useCallback)((function(e){return s.includes(e)}),[s])("can:review"),u=Object(c.useState)(n?n.question:""),p=Object(f.a)(u,2),j=p[0],b=p[1],d=Object(c.useState)(n&&n.topic?{topic:n.topic,subTopic:n.subTopic}:{topic:" ",subTopic:" "}),O=Object(f.a)(d,2),x=O[0],m=O[1],v=Object(c.useState)(n?n.children.map((function(e){var t=e.options,n=Object(je.a)(e,["options"]);return Object(h.a)(Object(h.a)({},n),{},{options:t.map((function(e){return{option:e.option,isCorrect:e.isCorrect}}))})})):[]),g=Object(f.a)(v,2),y=g[0],S=g[1];return Object(a.jsxs)(M.a,{onSubmit:function(e){e.preventDefault();var a={questionType:"comprehension",question:j,question_id:n?n._id:null,children:y,topic:x.topic,subTopic:x.subTopic};t(a,o)},children:[Object(a.jsx)(fe,{handleTopicAndSubject:function(e){m(Object(h.a)(Object(h.a)({},x),{},Object(re.a)({},e.target.name,e.target.value)))},topic:x.topic,subtopic:x.subTopic}),Object(a.jsx)(M.a.Field,{children:Object(a.jsx)(he.a,{autoFocus:!0,setOptions:{buttonList:ve},onChange:function(e){return b(e)},setContents:j,showToolbar:!0,enableToolbar:!0})}),Object(a.jsx)(M.a.Field,{children:Object(a.jsx)(z.a,{disabled:r,primary:!0,onClick:function(e){e.preventDefault(),S([].concat(Object(se.a)(y),[{question:"",additionalInfo:"",options:[]}]))},icon:"add",content:"Question",labelPosition:"right"})}),y.map((function(e,t){return Object(a.jsxs)(de,{children:[Object(a.jsxs)(K.a,{as:"h4",children:["Sub question ",t+1]}),Object(a.jsxs)(M.a.Field,{children:[Object(a.jsx)(M.a.Field,{children:Object(a.jsx)(z.a,{type:"button",compact:!0,disabled:r,basic:!0,color:"red",onClick:function(e){return function(e){var t=Object(se.a)(y);t.splice(e,1),S(t)}(t)},content:"Delete",icon:"trash alternate outline",labelPosition:"right"})}),Object(a.jsx)(M.a.Field,{children:Object(a.jsx)(he.a,{autoFocus:!0,setOptions:{buttonList:ve},onChange:function(e){return function(e,t){var n=Object(se.a)(y);n[t].question=e,S(n)}(e,t)},setContents:e.question,showToolbar:!0,enableToolbar:!0})}),Object(a.jsx)(M.a.Field,{children:Object(a.jsx)(z.a,{type:"button",compact:!0,disabled:r&&!l,primary:!0,onClick:function(e){return function(e,t){e.preventDefault();var n=Object(se.a)(y);n[t].options.push({option:"",isCorrect:!1}),S(n)}(e,t)},icon:"add",content:"Option",labelPosition:"right"})}),e.options.map((function(e,n){var c=e.option,o=e.isCorrect;return Object(a.jsx)(M.a.Field,{children:Object(a.jsxs)(M.a.Group,{widths:"1",inline:!0,children:[Object(a.jsx)(M.a.Field,{children:Object(a.jsx)($.a,{disabled:r&&!l,onClick:function(e){return function(e,t){var n=Object(se.a)(y);n[e].options[t].isCorrect=!n[e].options[t].isCorrect,S(n)}(t,n)},defaultChecked:o})}),Object(a.jsx)(M.a.Field,{children:Object(a.jsx)("input",{onChange:function(e){return function(e,t,n){var a=Object(se.a)(y);a[t].options[n].option=e.target.value,S(a)}(e,t,n)},value:c,type:"text"})}),Object(a.jsx)(z.a,{type:"button",circular:!0,icon:"superscript",disabled:r&&!l,compact:!0,basic:!0,color:"teal"}),Object(a.jsx)(z.a,{type:"button",circular:!0,compact:!0,disabled:r&&!l,basic:!0,color:"red",icon:"trash alternate outline",onClick:function(e){return function(e,t){var n=Object(se.a)(y);n[e].options.splice(t,1),S(n)}(t,n)}})]})},"option_".concat(n))})),Object(a.jsx)(M.a.Field,{children:Object(a.jsx)(z.a,{type:"button",compact:!0,primary:!0,disabled:!!e.additionalInfo||r&&!l,onClick:function(e){return function(e,t){e.preventDefault();var n=Object(se.a)(y);n[t].additionalInfo=" ",S(n)}(e,t)},content:"Additional Information",icon:"add",labelPosition:"right"})}),Object(a.jsx)(M.a.Field,{children:e.additionalInfo?Object(a.jsx)(he.a,{autoFocus:!0,setOptions:{buttonList:ve},onChange:function(e){return function(e,t){var n=Object(se.a)(y);n[t].additionalInfo=e,S(n)}(e,t)},setContents:e.additionalInfo,showToolbar:!0,enableToolbar:!0}):null})]},"inner_ques_".concat(t))]},"innerQuestion_".concat(t))})),Object(a.jsx)(z.a,{basic:!0,color:"green",disabled:r&&!l,content:"Save Question",icon:"save",labelPosition:"right"})]})},ye=[["undo","redo","font","fontSize","formatBlock"],["bold","underline","italic","strike","subscript","superscript","removeFormat"],["fontColor","hiliteColor","outdent","indent","align","horizontalRule","list","table"],["image","fullScreen","showBlocks","preview"]],Se=function(e){e.saveQuestionToDatabase;var t=e.retrievedQuestion,n=void 0===t?{}:t,o=(e.index,e.isSubmitted),i=void 0!==o&&o,r=Object(c.useContext)(G).roles,s=Object(c.useCallback)((function(e){return r.includes(e)}),[r])("can:review"),l=Object(c.useState)(""),u=Object(f.a)(l,2),p=u[0],j=u[1],b=Object(c.useState)({topic:" ",subTopic:" "}),d=Object(f.a)(b,2),O=d[0],x=d[1],m=Object(c.useState)([]),v=Object(f.a)(m,2),g=v[0],y=v[1],S=Object(c.useState)(""),C=Object(f.a)(S,2),T=C[0],P=C[1];Object(c.useEffect)((function(){var e=n&&n.question?n.question:"",t=n&&n.options_next?n.options_next.map((function(e){return{option:e.option,isCorrect:e.isCorrect}})):[],a=n&&n.additionalInfo?n.additionalInfo:"",c=n&&n.topic?{topic:n.topic,subTopic:n.subTopic}:{topic:" ",subTopic:" "};x(c),j(e),y(t),P(a)}),[]);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(M.a,{onSubmit:function(e){e.preventDefault()},children:[Object(a.jsx)(fe,{handleTopicAndSubject:function(e){x(Object(h.a)(Object(h.a)({},O),{},Object(re.a)({},e.target.name,e.target.value)))},topic:O.topic,subtopic:O.subTopic}),Object(a.jsx)(M.a.Field,{children:Object(a.jsx)(he.a,{autoFocus:!0,setOptions:{buttonList:ye},onChange:function(e){return j(e)},setContents:p,showToolbar:!0,enableToolbar:!0})}),Object(a.jsx)(M.a.Field,{children:Object(a.jsx)(z.a,{type:"button",compact:!0,primary:!0,disabled:i&&!s,onClick:function(e){e.preventDefault(),y([].concat(Object(se.a)(g),[{option:"",isCorrect:!1}]))},icon:"add",content:"Answer",labelPosition:"right"})}),g.map((function(e,t){return Object(a.jsx)(M.a.Field,{children:Object(a.jsxs)(M.a.Group,{widths:"1",inline:!0,children:[Object(a.jsx)(M.a.Field,{children:Object(a.jsx)("input",{value:n?e.option:null,onChange:function(e){return function(e,t){var n=Object(se.a)(g);n[t].option=e.target.value,y(n)}(e,t)},type:"text"})}),Object(a.jsx)(z.a,{type:"button",circular:!0,icon:"superscript",disabled:i&&!s,compact:!0,basic:!0,color:"teal"}),Object(a.jsx)(z.a,{type:"button",circular:!0,compact:!0,basic:!0,color:"red",disabled:i&&!s,icon:!0,onClick:function(e){return function(e,t){e.preventDefault();var n=Object(se.a)(g);n.splice(t,1),y(n)}(e,t)},children:Object(a.jsx)(V.a,{name:"trash alternate outline"})})]})},"option_".concat(t))})),Object(a.jsx)(M.a.Field,{children:Object(a.jsx)(z.a,{type:"button",compact:!0,primary:!0,disabled:!!T||i,onClick:function(e){e.preventDefault(),P(" ")},content:"Additional Information",icon:"add",labelPosition:"right"})}),Object(a.jsx)(M.a.Field,{children:T?Object(a.jsx)(he.a,{autoFocus:!0,setOptions:{buttonList:ye},onChange:function(e){P(e)},setContents:T,showToolbar:!0,enableToolbar:!0}):null}),Object(a.jsx)(z.a,{basic:!0,color:"green",content:"Save Question",disabled:i&&!s,icon:"save",labelPosition:"right"})]})})},Ce="normal",Te="comprehension",Pe=function(e){var t=e.updatePaperContent,n=e.retrievedQuestion,o=void 0===n?{}:n,i=e.index,r=Object(c.useState)(o?o.questionType:Ce),s=Object(f.a)(r,2),l=s[0],u=s[1],p=Object(c.useContext)(G),j=p.authToken,b=p.paperID,d=p.isSubmitted,O=p.isSpecialPaper,x=p.createNotification,m=p.addQuestion,v=p.paperGrade,g=p.paperSubject,y=function(e,n){e.paperID=b,m(Object(h.a)(Object(h.a)({},e),{},{paperGrade:v,paperSubject:g}),j,O).then((function(e){var a=e.data;if(!a.success)throw new Error("Failed to create/update question");t(a.question,n),x("Success!!","success","Question created successfully")})).catch((function(e){x("Error!!","danger",e.message)}))};return Object(a.jsxs)(de,{children:[Object(a.jsx)(M.a,{style:{marginBottom:"10px"},children:Object(a.jsx)(M.a.Field,{children:Object(a.jsx)(H.a,{disabled:d,onChange:function(e,t){var n=t.value;u(n)},selection:!0,fluid:!0,defaultValue:o&&o.questionType?o.questionType:"normal",options:[{key:1,text:"Normal",value:"normal"},{key:2,text:"Comprehension",value:"comprehension"},{key:3,text:"CBC",value:"cbc"}],placeholder:"Choose Question Type"})})}),o?function(e,t){switch(e.questionType){case Ce:return Object(a.jsx)(me,{isSubmitted:d,saveQuestionToDatabase:y,retrievedQuestion:o,index:t});case Te:return Object(a.jsx)(ge,{isSubmitted:d,saveQuestionToDatabase:y,retrievedQuestion:o,index:t});case"cbc":return Object(a.jsx)(Se,{isSubmitted:d,saveQuestionToDatabase:y,retrievedQuestion:o,index:t});default:return null}}(o,i):function(e){switch(e){case Ce:return Object(a.jsx)(me,{saveQuestionToDatabase:y});case Te:return Object(a.jsx)(ge,{saveQuestionToDatabase:y});case"cbc":return Object(a.jsx)(Se,{saveQuestionToDatabase:y});default:return null}}(l)]})},ke=n(600),De=function(e){var t=e.isActive,n=e.setIsActive,o=e.setIsSubmitted,i=Object(c.useContext)(G),r=i.authToken,s=i.isSubmittedDispatch,l=i.fetchPapers,u=i.socketIO,p=Object(c.useState)(""),j=Object(f.a)(p,2),b=(j[0],j[1]),d=function(e){console.log(e),b((function(t){return t+e+"\n"}))};return u.on("submission_status",(function(e){d(e)})),u.on("submission_error",(function(e){d(e),setTimeout((function(){n(!1)}),3e3)})),u.on("submission_end",(function(e){d(e),o(!0),s(!0),l(r),setTimeout((function(){n(!1)}),3e3)})),Object(a.jsx)(ke.a,{active:t,children:Object(a.jsx)(ie.a,{content:"submitting paper ... please wait ..."})})},_e="can:review",Ie=function(e){var t=e.fetched_questions,n=void 0===t?[]:t,i=e.pageCount,r=e.setCurrectActivePage,s=e.currentActivePage,l=Object(c.useContext)(G),u=l.authToken,p=l.createNotification,j=l.paperID,d=l.setIsSample,O=l.changePaperID,h=l.removePaper,x=l.paperName,m=l.fetchPapers,v=l.isSubmitted,g=l.submitPaperDispatch,y=l.approveQuestionDispatch,S=l.removeQuestionDispatch,C=l.socket_io_id,T=l.paperType,P=l.isSpecialPaper,k=l.roles,D=function(e){return k.includes(e)},_=D(_e),I=Object(c.useState)(new Array(n.length).fill(!0)),F=Object(f.a)(I,2),E=F[0],w=F[1],A=Object(c.useState)([]),N=Object(f.a)(A,2),Q=N[0],q=N[1],R=Object(c.useState)(!1),L=Object(f.a)(R,2),B=L[0],M=L[1],H=Object(c.useState)(!1),U=Object(f.a)(H,2),Y=U[0],J=U[1];Object(c.useEffect)((function(){q(n),M(v)}),[]),Object(c.useEffect)((function(){q(n)}),[n]),Object(c.useEffect)((function(){}),[v]);var Z=function(e,t){var n=Object(se.a)(Q);n[t]=e,q(n)},X=function(e,t){y(e,t,u).then((function(e){if(!e.data.success)throw new Error("Failed to approve question");!function(e,t){var n=Object(se.a)(Q);n[t].status=e,q(Object(se.a)(n))}("approved",t)})).catch((function(e){p("Error!","danger",e.message)}))};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(De,{isActive:Y,setIsActive:J,setIsSubmitted:M}),Object(a.jsxs)(pe.a.div,{initial:{opacity:0},animate:{opacity:1,duration:.4},children:[Object(a.jsxs)("div",{style:{marginBottom:"10px",borderBottom:"1px solid #dbdbdb",paddingBottom:"1px"},children:[Object(a.jsx)(z.a,{compact:!0,basic:!0,color:"teal",disabled:B,onClick:function(e){q([].concat(Object(se.a)(Q),[null]))},content:"create question",icon:"add",labelPosition:"right"}),Object(a.jsx)(z.a,{compact:!0,basic:!0,color:"orange",disabled:D(_e)||B,onClick:function(){g(C,j,u).then((function(e){var t=e.data;if(!t.success)throw new Error("Failed to submit paper for review");J(!0),p("Success!","success",t.message)})).catch((function(e){console.log(e),p("Error!","danger",e.message)}))},content:"submit paper",icon:"send",labelPosition:"right"}),Object(a.jsx)(z.a,{compact:!0,basic:!0,color:"red",disabled:B&&!_,onClick:function(){window.confirm("are you sure?")&&h(j,u,P).then((function(e){var t=e.data;if(t){if(t.success)return p("Success!!","success","Paper deleted successfully"),m(u),void O(null);throw new Error(t.error)}})).catch((function(e){p("Error!!","danger",e.message)}))},content:"delete paper",icon:"trash alternate outline",labelPosition:"right"}),_?Object(a.jsx)(z.a,{compact:!0,basic:!0,color:"green",disabled:!0,content:"approve paper",icon:"thumbs up outline",labelPosition:"right"}):null,Object(a.jsxs)("div",{style:{margin:"5px"},children:[Object(a.jsxs)(W.a,{children:["Paper Type",Object(a.jsx)(W.a.Detail,{children:T})]}),Object(a.jsxs)(W.a,{children:["Paper Name",Object(a.jsx)(W.a.Detail,{children:x})]}),Object(a.jsxs)(W.a,{children:["Number of Questions",Object(a.jsx)(W.a.Detail,{children:Q.length})]}),Object(a.jsxs)(W.a,{children:["Submitted",Object(a.jsx)(W.a.Detail,{children:Object(a.jsx)(V.a,{color:v?"green":"red",name:v?"check circle outline":"ban"})})]})]})]}),Object(a.jsxs)("div",{style:{height:"85vh",overflowY:"scroll",paddingRight:"6px",paddingLeft:"4px"},children:[Q.map((function(e,t){var n;return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(b.a.Group,{horizontal:!0,compact:!0,children:[Object(a.jsx)(b.a,{onClick:function(e){return function(e){var t=Object(se.a)(E);t[e]=!t[e]||!t[e],w(t)}(t)},style:{cursor:"pointer"},color:"orange",children:Object(a.jsxs)(K.a,{as:"h3",children:["Question  ",t+1]})}),Object(a.jsx)(b.a,{basic:!0,textAlign:"center",color:"green",children:Object(a.jsx)(W.a,{color:"green",children:e&&e.status?e.status.toUpperCase():"ONGOING"})}),Object(a.jsxs)(b.a,{basic:!0,textAlign:"right",color:"red",children:[e&&null!==e._id&&D(_e)?Object(a.jsx)(z.a,{basic:!0,compact:!0,color:"olive",icon:!0,onClick:function(n){return function(e,t,n){d(u,t,n).then((function(t){if(t){var a=Object(se.a)(Q);a[e].isSample=n,q(a)}}))}(t,e&&e._id,e&&!e.isSample)},content:e&&e.isSample?"remove sample":"set sample"}):null,B&&D(_e)?Object(a.jsx)(z.a,(n={basic:!0,compact:!0,color:"orange",disabled:e&&e.isExposed,icon:!0,onClick:function(n){return X(e&&e._id,t)},content:"Approve"},Object(re.a)(n,"icon","thumbs up alternate outline"),Object(re.a)(n,"labelPosition","right"),n)):null,Object(a.jsx)(z.a,{compact:!0,basic:!0,color:"red",disabled:v&&!_,onClick:function(n){return function(e,t){if(window.confirm("are you sure?")){var n=Object(se.a)(Q),a=n[t],c=function(){n.splice(t,1),q(n),p("Success!","success","Question removed successfully")};a?S(e,u).then((function(){c()})).catch((function(e){p("Error!","error",e.message)})):c()}}(e?e._id:null,t)},content:"Delete",icon:"trash alternate outline",labelPosition:"right"})]})]}),Object(a.jsx)(le.a,{visible:!E[t]||!E[t],animation:"drop",duration:450,children:Object(a.jsx)("div",{style:{marginBottom:"20px"},children:Object(a.jsx)(Pe,{updatePaperContent:Z,retrievedQuestion:e,index:t},"question_".concat(t))})})]},"question_".concat(t))})),i>1?Object(a.jsx)(ue.a,{onPageChange:function(e,t){var n=t.activePage;r(n)},defaultActivePage:s,totalPages:i}):null]})]})]})},Fe=n(329),Ee=n.n(Fe),we=[{key:"sample",text:"Samples",value:"isSample"},{key:"none",text:"None",value:"none"}],Ae=function(e){var t=e.setChooseCategory;return Object(a.jsx)(H.a,{onChange:function(e,n){var a=n.value;t(a)},selection:!0,fluid:!0,options:we,placeholder:"Filter"})},Ne=function(e){var t=e.setSearchTerm,n=Object(c.useContext)(G),o=n.setIsRefreshingDispatch,i=n.isRefreshing,r=Object(c.useState)(""),s=Object(f.a)(r,2),l=s[0],u=s[1],p=Object(c.useState)(""),j=Object(f.a)(p,2),b=j[0],d=j[1];Object(c.useEffect)((function(){"none"===b&&o(!i)}),[b]);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(M.a,{onSubmit:function(e){e.preventDefault();var n={};l&&(n.searchTerm=l),b&&(n.searchCategory=b),t(Ee.a.stringify(n)),u(""),d("")},children:Object(a.jsxs)(M.a.Group,{children:[Object(a.jsx)(M.a.Field,{width:11,children:Object(a.jsx)("input",{type:"search",placeholder:"Search...",onChange:function(e){u(e.target.value)},value:l})}),Object(a.jsx)(M.a.Field,{width:2,children:Object(a.jsx)(Ae,{setChooseCategory:d})}),Object(a.jsx)(M.a.Field,{width:2,children:Object(a.jsx)(z.a,{content:"SEARCH",icon:"search",color:"green",basic:!0,labelPosition:"right"})})]})}),Object(a.jsx)(O.a,{})]})},Qe=function(){var e=Object(c.useContext)(G),t=e.paperID,n=e.fetchQuestions,o=e.authToken,i=e.isSubmittedDispatch,r=e.updatePaperDetails,s=e.searchForQuestions,l=e.isRefreshing,u=e.isSpecialPaper,p=e.rootPaperName,j=Object(c.useState)([]),d=Object(f.a)(j,2),O=d[0],h=d[1],x=Object(c.useState)(null),m=Object(f.a)(x,2),v=m[0],g=m[1],y=Object(c.useState)(0),S=Object(f.a)(y,2),C=S[0],T=S[1],P=Object(c.useState)(1),k=Object(f.a)(P,2),D=k[0],_=k[1],I=Object(c.useState)(!1),F=Object(f.a)(I,2),E=F[0],w=F[1],A=Object(c.useState)(null),N=Object(f.a)(A,2),Q=N[0],q=N[1];return Object(c.useEffect)((function(){_(1)}),[t]),Object(c.useEffect)((function(){null!==v&&s(o,t,v,u).then((function(e){var t=e.data;t&&t.success&&(T(1),h(t.paper.questions))})).catch((function(e){q(e.message)}))}),[v]),Object(c.useEffect)((function(){w(!0),n(t,o,u,D-1).then((function(e){var t=e.data;T(t.pageCount),h(t.paper.questions),i(t.paper.isSubmitted),r({grade:u?p:t.paper.grade,subject:t.paper.subject,paperName:u?t.paper.subject:t.paper.paperName,paperType:u?"Special Paper":t.paper.paperType})})).catch((function(e){q(e.message)})).finally((function(){w(!1)}))}),[t,D,l]),E?Object(a.jsx)("div",{children:Object(a.jsx)(b.a,{children:Object(a.jsx)(ie.a,{active:!0,inline:"centered",children:"Fetching questions..."})})}):Q?Object(a.jsx)(b.a,{children:"Error fetching questions"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Ne,{setSearchTerm:g}),Object(a.jsx)(Ie,{fetched_questions:O,pageCount:C,setCurrectActivePage:_,currentActivePage:D})]})},qe=n(603),Re=n.p+"static/media/adminfavi.ee5071ab.jpg",Ge=function(){var e=Object(c.useContext)(G).logoutDispatcher;return Object(a.jsxs)(qe.a,{size:"small",attached:"top",style:{marginTop:"5px"},children:[Object(a.jsx)(qe.a.Item,{header:!0,as:l.b,to:"/dashboard",children:Object(a.jsx)("img",{src:Re,alt:"admin favicon"})}),Object(a.jsx)(qe.a.Menu,{position:"right",children:Object(a.jsx)(qe.a.Item,{children:Object(a.jsx)(z.a,{primary:!0,onClick:function(){return e(),Object(a.jsx)(u.a,{to:"/"})},children:"Sign Out"})})})]})},Le=function(){var e=Object(c.useContext)(G).paperID;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Ge,{}),Object(a.jsx)(s.a,{children:Object(a.jsx)(b.a,{style:{marginTop:"5px"},children:Object(a.jsx)(d.a,{children:Object(a.jsxs)(d.a.Row,{children:[Object(a.jsx)(d.a.Column,{width:4,children:Object(a.jsx)(oe,{})}),Object(a.jsx)(d.a.Column,{width:12,children:e?Object(a.jsx)(Qe,{}):null})]})})})})]})},Be=function(){var e=Object(c.useContext)(G),t=e.loginDispatch,n=e.authToken,o=Object(c.useState)(!1),i=Object(f.a)(o,2),r=i[0],s=i[1],l=Object(c.useState)({email:"",password:""}),p=Object(f.a)(l,2),j=p[0],b=p[1],d=function(e){b(Object(h.a)(Object(h.a)({},j),{},Object(re.a)({},e.target.name,e.target.value)))};return n?Object(a.jsx)(u.a,{to:"/dashboard"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K.a,{size:"huge",children:"Zoezi Data Entry Tool"}),Object(a.jsx)(be.a,{children:Object(a.jsx)(be.a.Content,{children:Object(a.jsxs)(M.a,{onSubmit:function(e){e.preventDefault(),s(!0),t(j),s(!1)},children:[Object(a.jsxs)(M.a.Field,{children:[Object(a.jsx)("label",{children:"Email"}),Object(a.jsx)("input",{onChange:d,value:j.email,type:"email",name:"email",placeholder:"Email Address"})]}),Object(a.jsxs)(M.a.Field,{children:[Object(a.jsx)("label",{children:"Password"}),Object(a.jsx)("input",{onChange:d,value:j.password,placeholder:"Password",type:"password",name:"password"})]}),Object(a.jsx)(z.a,{loading:r,primary:!0,fluid:!0,type:"submit",children:"Login"})]})})})]})},ze=function(){return Object(a.jsx)("div",{style:{marginLeft:"auto",marginRight:"auto",marginTop:"20px",width:"400px"},children:Object(a.jsx)(Be,{})})},Me=function(e){var t=e.component,n=(Object(je.a)(e,["component"]),Object(c.useContext)(G).authToken);return Object(a.jsx)(u.b,{children:n?Object(a.jsx)(t,{}):Object(a.jsx)(u.a,{to:"/"})})},He=(n(608),n(583),n(587),n(348),n(349),n(177),n(173),n(352),n(591),function(){var e=Object(c.useContext)(G),t=e.authToken,n=e.socketIO,o=e.createNotification,i=e.fetchPapers;return Object(c.useEffect)((function(){t&&n.emit("author regestration",{authToken:t})}),[t]),n.on("review paper",(function(e){o("success","info",String(e)),i(t)})),Object(a.jsx)(a.Fragment,{})});n(353);var Ue=function(){return Object(a.jsxs)(l.a,{children:[Object(a.jsx)(j.a,{}),Object(a.jsx)(L,{children:Object(a.jsxs)(s.a,{children:[Object(a.jsx)(He,{}),Object(a.jsxs)(u.d,{children:[Object(a.jsx)(u.b,{exact:!0,path:"/",children:Object(a.jsx)(ze,{})}),Object(a.jsx)(Me,{path:"/dashboard",component:Le})]})]})})]})};r.a.render(Object(a.jsx)(Ue,{}),document.getElementById("root"))}},[[566,1,2]]]);
//# sourceMappingURL=main.a7318c02.chunk.js.map